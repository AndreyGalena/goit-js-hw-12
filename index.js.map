{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/additional_effects.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["/* \n    В файле pixabay-api.js сохраняй функции для выполнения HTTP-запросов:\n*/\nimport axios from \"axios\";\n\nconst API_KEY = '18618260-23b6d79f5c2a85fb2d6c9be6b';\nconst url = `https://pixabay.com/api`;\n\n\nexport async function getImagesByQuery(query, page) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        per_page: 15,\n        page: page,\n        lang: 'ru',\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    const response = await axios(`${url}/?${params}`)\n    return response.data;\n}\n\n","import { hideLoader, showLoadMoreButton } from './render-functions';\n\n\nexport function ghostEffectBlock() {\n    /* Плавное появление всего блока после загрузки вех изображений */\n\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    const images = Array.from(galleryItems).map(item => item.querySelector('img'));\n\n    let loadedCount = 0;\n\n    images.forEach(img => {\n        const onLoad = () => {\n            loadedCount++;\n            if (loadedCount === images.length) {\n                // Все изображения загружены — показываем весь блок\n\n                // Добавление класса 'visible' с каскадом\n                galleryItems.forEach((item, index) => {\n                    setTimeout(() => {\n                        item.classList.add('visible')\n                    }, index * 50); // каскадная задержка\n                });\n                // убирает Loader\n                hideLoader();\n                // показывает кнопку More\n                showLoadMoreButton();\n            }\n        };\n\n        if (img.complete) {\n            // Изображение уже загружено (кеш)\n            onLoad();\n        } else {\n            img.addEventListener('load', onLoad);\n        }\n    });\n}","/* \n    В файле render-functions.js создай экземпляр SimpleLightbox для работы с модальным окном \n    и сохраняй функции для отображения элементов интерфейса:\n*/\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { ghostEffectBlock } from './additional_effects';\n\n\nconst loader = document.getElementById('loader');\nconst buttonMore = document.querySelector('.buttonMore');\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\n\nfunction createMarkup(arr) {\n    return arr.map((img) => `\n    <div class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${img.webformatURL}\" data-source=\"${img.largeImageURL}\" alt=\"${img.tags}\" />\n        <div class=\"gallery-textBox\">\n            <div>\n                <p>Likes</p>\n                <p>${img.likes}</p>\n            </div>\n            <div>\n                <p>Views</p>\n                <p>${img.views}</p>\n            </div>\n            <div>\n                <p>Comments</p>\n                <p>${img.comments}</p>\n            </div>\n            <div>\n                <p>Downloads</p>\n                <p>${img.downloads}</p>\n            </div>\n        </div>\n        </a>\n    </div>\n  `).join(\"\");\n}\n\n\nexport function createGallery(images) {\n    const gallery = document.getElementById('gallery');\n    if (gallery) {\n        gallery.insertAdjacentHTML(\"beforeend\", createMarkup(images));\n        // Плавное появление img при загрузке\n        ghostEffectBlock();\n        // Обновление галереи\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    /* должна очищать содержимое контейнера галереи */\n    const gallery = document.getElementById('gallery');\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    /* Показывает лоадер */\n    // удалить чтобы стал видемый\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    /* Скрыть лоадер */\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    // должна добавлять класс для отображения кнопки Load more.\n    buttonMore.classList.replace(\"hideLoadMoreButton\", \"showLoadMoreButton\");\n}\n\nexport function hideLoadMoreButton() {\n    // должна убирать класс для отображения кнопки Load more\n    buttonMore.classList.replace(\"showLoadMoreButton\", \"hideLoadMoreButton\");\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    showLoader,\n    hideLoadMoreButton,\n    clearGallery\n} from './js/render-functions';\n\n\n\niziToast.success({\n    title: 'Внимание!',\n    message: 'Мы готовы к работе !',\n    position: 'topRight'\n});\n\n/* \nAPI_KEY находится:\nhttps://pixabay.com/api/docs/\nParameters -> key (required)\tstr\tYour API key: 18618260-23b6d79f5c2a85fb2d6c9be6b\n*/\n\nlet page = 1;\nlet query = null;\n\nconst form = document.querySelector('.form');\nconst buttonMore = document.querySelector('.buttonMore');\n\n\nasync function takeImages() {\n    try {\n        // показать лоадер\n        showLoader();\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n    } catch (error) {\n        iziToast.error({\n            title: 'Error!',\n            icon: 'fa-solid fa-xmark',\n            iconColor: 'white',\n            message: `${error.message}`,\n            messageColor: 'white',\n            position: 'center',\n            timeout: 5000,\n            progressBar: true,\n            backgroundColor: 'red',\n        });\n    }\n}\n\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    // убирает кнопку More\n    hideLoadMoreButton();\n    // зачищаем галерею\n    clearGallery();\n    // пользовательский ввод\n    query = form.elements['search-text'].value.trim();\n    // если ничего то.\n    if (!query) return;\n    // Делает запрос на сервер\n    takeImages();\n})\n\nbuttonMore.addEventListener('click', (event) => {\n    event.preventDefault();\n    // убирает кнопку More\n    hideLoadMoreButton();\n    page++;\n    // Делает запрос на сервер\n    takeImages();\n})"],"names":["API_KEY","url","getImagesByQuery","query","page","params","axios","ghostEffectBlock","galleryItems","images","item","loadedCount","img","onLoad","index","hideLoader","showLoadMoreButton","loader","buttonMore","lightbox","SimpleLightbox","createMarkup","arr","createGallery","gallery","clearGallery","showLoader","hideLoadMoreButton","iziToast","form","takeImages","data","error","event"],"mappings":"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"}